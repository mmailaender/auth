collection Account {
    user: Ref<User>
    socialProvider: {
        name: "Github" | "Google" | "Facebook"
        userId: String
        email: String
    }?
    passkey: {
        publicKey: String
        algorithmId: Long
        id: String
    }?

    compute userAndSocialProviderName: Boolean = (doc => doc.user != null && doc.socialProvider?.name != null)
    compute passkeyId: Boolean = (doc => doc.passkey?.id != null)
    unique [.userAndSocialProviderName]
    unique [.passkeyId]
}